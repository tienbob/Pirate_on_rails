<style>
  body.bg-movie-index {
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    min-height: 100vh;
  }
</style>
<script>
  document.body.classList.add('bg-movie-index');
</script>

<div class="container py-5">
  <h1 class="text-center text-white mb-5">Movie Gallery</h1>
  <div class="row g-4">
    <% @movies.each do |movie| %>
      <div class="col-md-6 col-lg-4">
        <div class="card border-0 shadow-lg rounded-4 h-100">
          <% if movie.video_file.attached? %>
            <video class="card-img-top rounded-top-4" width="100%" height="180" controls>
              <source src="<%= url_for(movie.video_file) %>" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          <% else %>
            <div class="bg-secondary text-white rounded-top-4 d-flex align-items-center justify-content-center" style="height:180px;">
              <span>No video</span>
            </div>
          <% end %>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-bold"><%= movie.title %></h5>
            <p class="card-text text-muted mb-2"><%= movie.release_date.strftime('%B %d, %Y') if movie.release_date %></p>
            <% if movie.is_pro %>
              <span class="badge bg-gradient text-white mb-2">Pro</span>
            <% else %>
              <span class="badge bg-success mb-2">Free</span>
            <% end %>
            <p class="card-text flex-grow-1"><%= truncate(movie.description, length: 80) %></p>
            <%= link_to 'View', movie_path(movie), class: 'btn btn-gradient mt-2' %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<style>
  .bg-gradient {
    background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
    color: #fff;
  }
</style>
