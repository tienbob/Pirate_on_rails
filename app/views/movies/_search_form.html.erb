<div data-controller="movie">
<form id="movie-search-form" action="<%= search_movies_path %>" method="get" style="display:flex; flex-direction:column; gap:0.5rem; margin-bottom:1.5rem; width:100%;">
  <div style="display:flex; gap:0.5rem; align-items:center; width:100%;">
    <input type="text" name="q" class="form-control" placeholder="Search by name..." style="flex:2 1 0; min-width:0;">
    <select id="year-from" name="year_from" class="form-control" style="flex:1 1 0; min-width:0;" data-movie-target="yearFrom">
      <option value="">Year from</option>
      <% (2000..Time.current.year).each do |y| %>
        <option value="<%= y %>"><%= y %></option>
      <% end %>
    </select>
    <select id="year-to" name="year_to" class="form-control" style="flex:1 1 0; min-width:0;" data-movie-target="yearTo">
      <option value="">Year to</option>
      <% (2000..Time.current.year).each do |y| %>
        <option value="<%= y %>"><%= y %></option>
      <% end %>
    </select>
  </div>
  <div style="display:flex; align-items:center; gap:0.5rem; width:100%;">
    <label class="form-label mb-0" style="white-space:nowrap;">Tags</label>
    <div id="tag-select" class="d-flex flex-wrap gap-1" style="min-height:2.5em; max-height:2.5em; overflow-x:auto; overflow-y:hidden; border:1px solid #ced4da; border-radius:0.375rem; background:#fff; flex:1 1 0;" data-movie-target="tagSelect">
      <% Tag.all.each do |tag| %>
        <span class="badge bg-secondary tag-option" data-tag="<%= tag.name %>" style="cursor:pointer; user-select:none;"> <%= tag.name %> </span>
      <% end %>
    </div>
    <input type="hidden" name="tags[]" id="selected-tags" data-movie-target="selectedTags">
  </div>
  <div style="width:100%; display:flex;">
    <button type="submit" class="btn btn-gradient w-100" style="width:100%;">Search</button>
  </div>
</form>
</div>
