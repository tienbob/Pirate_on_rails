<div class="container py-5">
  <h1 class="mb-4 text-center">New Payment</h1>
  
  <% if @payment.errors.any? %>
    <div class="alert alert-danger">
      <h4><%= pluralize(@payment.errors.count, "error") %> prohibited this payment from being saved:</h4>
      <ul class="mb-0">
        <% @payment.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with(model: @payment, local: true, class: "row justify-content-center") do |form| %>
    <div class="col-lg-6">
      <div class="card shadow-lg rounded-4 p-4">
        <div class="mb-3">
          <%= form.label :amount, class: "form-label" %>
          <%= form.number_field :amount, step: 0.01, class: "form-control", required: true %>
        </div>
        
        <div class="mb-3">
          <%= form.label :currency, class: "form-label" %>
          <%= form.select :currency, [["USD", "usd"], ["EUR", "eur"], ["GBP", "gbp"]], { selected: "usd" }, { class: "form-select" } %>
        </div>
        
        <div class="mb-3">
          <%= form.label :status, class: "form-label" %>
          <%= form.select :status, [["Pending", "pending"], ["Processing", "processing"], ["Completed", "completed"], ["Failed", "failed"], ["Refunded", "refunded"], ["Cancelled", "cancelled"]], { selected: "pending" }, { class: "form-select" } %>
        </div>
        
        <% if current_user&.admin? %>
          <div class="mb-3">
            <%= form.label :user_id, "User", class: "form-label" %>
            <%= form.collection_select :user_id, User.all, :id, :email, {prompt: "Select User"}, {class: "form-select", required: true} %>
          </div>
        <% else %>
          <%= form.hidden_field :user_id, value: current_user.id %>
        <% end %>
        
        <div class="d-flex justify-content-between">
          <%= form.submit "Create Payment", class: "btn btn-gradient" %>
          <%= link_to "Back", payments_path, class: "btn btn-secondary" %>
        </div>
      </div>
    </div>
  <% end %>
</div>
